# 视频处理工具 - Mzl Video Process

## 项目概述

这是一个基于 .NET 8 和 WPF 的现代化视频处理应用程序，提供视频预览、格式转换和去水印功能。

## 主要功能

### 1. 视频预览
- 支持多种视频格式：MP4、AVI、MOV、MKV、WMV、FLV、M3U8
- 基本播放控制：播放、暂停、停止
- 进度条显示和控制
- 时间显示

### 2. 格式转换
- 支持将 .m3u8 格式转换为 MP4 格式
- 支持输出格式：MP4、AVI、MOV、MKV
- 视频质量选择：高质量、中等质量、低质量
- 分辨率选择：保持原始、1920×1080、1280×720、854×480
- 实时转换进度显示
- 详细的转换日志

### 3. 去水印功能
- 可视化水印区域选择
- 多种去水印方法：
  - 模糊处理：使用模糊滤镜处理水印区域
  - 马赛克：将水印区域替换为马赛克效果
  - 裁剪移除：通过裁剪的方式移除水印
  - 智能填充：使用智能算法填充水印区域
  - **Delogo滤镜**：使用FFmpeg专业的delogo滤镜，专门用于去除标志和水印，效果更佳
- 实时预览选中的水印区域
- 处理进度显示

## 技术特性

- **现代化 UI**：使用自定义样式实现现代化的用户界面
- **高性能**：基于 .NET 8 框架
- **模块化设计**：清晰的项目结构和代码组织
- **FFmpeg 集成**：使用 FFMpegCore 库处理视频操作

## 项目结构

```
Mzl.Video.Process/
├── Models/                 # 数据模型
│   ├── VideoInfo.cs       # 视频信息模型
│   ├── ConversionTask.cs  # 转换任务模型
│   └── WatermarkRemovalTask.cs # 去水印任务模型
├── Services/              # 服务层
│   └── FFmpegService.cs   # FFmpeg 服务
├── App.xaml              # 应用程序资源和样式
├── MainWindow.xaml       # 主窗口界面
└── MainWindow.xaml.cs    # 主窗口代码隐藏
```

## 系统要求

- Windows 10/11
- .NET 8.0 Runtime
- FFmpeg 可执行文件（ffmpeg.exe、ffplay.exe、ffprobe.exe）

## 安装和使用

### 1. 准备 FFmpeg
确保在项目根目录下有以下 FFmpeg 可执行文件：
- ffmpeg.exe
- ffplay.exe  
- ffprobe.exe

### 2. 编译和运行
```bash
# 还原依赖包
dotnet restore

# 编译项目
dotnet build

# 运行应用程序
dotnet run
```

## 主要依赖包

- **FFMpegCore (5.2.0)**: FFmpeg .NET 封装库
- **System.Text.Json (9.0.6)**: JSON 序列化和反序列化

## 使用说明

### 视频预览
1. 在"视频预览"标签页中点击"选择视频文件"
2. 选择要预览的视频文件
3. 使用播放控制按钮控制播放

### 格式转换
1. 在"格式转换"标签页中选择输入文件
2. 选择输出位置和格式
3. 配置视频质量和分辨率
4. 点击"开始转换"

### 去水印
1. 在"去水印"标签页中选择要处理的视频
2. 在视频预览区域拖拽选择水印区域
3. 选择去水印方法
4. 选择输出位置
5. 点击"开始去水印"

## 注意事项

- 确保 FFmpeg 可执行文件路径正确配置
- 大文件处理可能需要较长时间
- 建议在处理重要文件前先进行备份

## 版本信息

- 版本：1.0
- 开发框架：.NET 8.0
- UI框架：WPF
- 视频处理：FFmpeg

## 许可证

本项目仅供学习和研究使用。
